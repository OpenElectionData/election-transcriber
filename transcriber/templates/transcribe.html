{% extends 'base.html' %}
{% from 'macros.html' import render_image %}
{% block title %}Election Transcriber{% endblock %}
{% block content %}
<h1>{{task.name}}</h1>
<div class="row">
    <div class='col-md-6'>
        {{ render_image() }}
    </div>
    <div class="col-sm-6">
        <form id="transcriber" role="form" class="form-horizontal" method="POST" action="">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            {% for section in task.sections %}
                <div class="well">
                    <h3>{{ section.name }}</h3>
                    {% for field in section.fields %}
                        {% set form_field = form|attr(field.slug) %}
                        {% if form_field.errors %}
                        <div class="form-group has-error">
                        {% else %}
                        <div class="form-group">
                        {% endif %}
                            {% if form_field.widget.input_type == 'text' %}
                                <label for="id_{{ field.slug }}" class="col-sm-2 control-label">{{ field.name }}</label>
                                <div class='col-sm-10'>
                                    {{ form_field(class_='form-control') }}
                                </div>
                            {% elif form_field.widget.input_type == 'checkbox' %}
                                <div class="checkbox col-sm-offset-2">
                                    <label>
                                        {{ form_field }} {{ field.name }}
                                    </label>
                                </div>
                            {% endif %}
                            {% if form_field.errors %}
                                {% for error in form_field.errors %}
                                <span class="help-block"><i class="fa fa-remove"> </i> {{error}}</span>
                                {% endfor %}
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
            <div class="form-group">
                <div class="col-sm-12">
                    <button class="btn btn-success" id="save-form">
                        <i class='fa fa-save'></i>
                        Submit
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}
{% block extra_javascript %}
    <script src="{{ url_for('static', filename='js/jquery.panzoom.min.js') }}"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('.panzoom').panzoom({
                $zoomRange: $('input[type="range"]')
            });
        })
    </script>
{% endblock %}
