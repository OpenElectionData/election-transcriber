{% extends 'base.html' %}
{% from 'macros.html' import render_image %}
{% block title %}{{task.name}}{% endblock %}
{% block content %}

<div>
    <strong>{{task.name}}</strong>
    <button type="button" data-toggle="modal" data-target="#help-modal" class="btn btn-link"><i class='fa fa-info-circle fa-lg'></i></button>
</div>

<div class="row">
    <div class="col-sm-12">
        {% if transcriptions %}
            <h2>Transcriptions</h2>
            <div>
                <i class="fa fa-times fa-fw"></i> Blank <br>
                <i class="fa fa-question fa-fw"></i> Not legible <br>
                <a href="{{ url_for('views.download_transcriptions', task_id=task.id) }}"><i class="fa fa-download fa-fw"></i> Download CSV</a>
            </div>
            <table class="table">
                <tr>
                    {% for h in header %}
                        <th> {{h}} </th>
                    {% endfor %}
                </tr>
                {% for transcription in transcriptions %}
                    <tr>
                        {% for col in transcription %}
                            <td><small> {{col|safe}} </small></td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </table>
        {% else %}
            <h2>No transcriptions yet</h2>
        {% endif %}
    </div>
</div>

<div id="help-modal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <p class="modal-title"><strong>{{task.name}} - Info</strong></p>
            </div>
            <div class="modal-body">
                {% if task.description %}
                    <p>{{task.description}}</p><br>
                {% endif %}
                <p>
                {% if task.reviewer_count %}
                    <i class="fa fa-user fa-fw"></i> <strong>{{task.reviewer_count}}</strong> reviewers per document<br>
                {% endif %}
                {% if task.deadline %}
                    <i class="fa fa-calendar fa-fw"></i> due {{task.deadline | format_date}}<br>
                {% endif %}
                </p>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


{% endblock %}
{% block extra_javascript %}

    <script type="text/javascript">
        $(document).ready(function(){
            console.log("hi")
        })

    </script>
{% endblock %}
